(this.webpackJsonpcinetv=this.webpackJsonpcinetv||[]).push([[0],{35:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(28),c=n.n(r),i=n(5),s=n(6),l=n(8),o=n(7),d=(n(35),n(4)),b=n(2),u=n(12),j=n(19),m=n(0),h=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e="bi bi-heart";return this.props.liked&&(e+="-fill heart-color"),Object(m.jsx)("div",{className:"heart",children:Object(m.jsx)("button",{onClick:this.props.onClick,className:"btn btn-sm",children:Object(m.jsx)("i",{className:e,"aria-hidden":"true",children:" "})})})}}]),n}(a.Component),v=function(e){var t=e.movies,n=e.onDelete,a=e.onLike,r=e.onSort;return Object(m.jsxs)("table",{className:"table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{onClick:function(){return r("title")},children:"Title"}),Object(m.jsx)("th",{onClick:function(){return r("genre.name")},children:"Genre"}),Object(m.jsx)("th",{onClick:function(){return r("numberInStock")},children:"Stock"}),Object(m.jsx)("th",{onClick:function(){return r("dailyRentalRate")},children:"Rate"}),Object(m.jsx)("th",{children:" "}),Object(m.jsx)("th",{children:" "})]})}),Object(m.jsx)("tbody",{children:t.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(d.b,{to:"/movies/".concat(e._id),children:e.title})}),Object(m.jsx)("td",{children:e.genre.name}),Object(m.jsx)("td",{children:e.numberInStock}),Object(m.jsx)("td",{children:e.dailyRentalRate}),Object(m.jsx)("td",{children:Object(m.jsx)(h,{liked:e.liked,onClick:function(){return a(e)}})}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{onClick:function(){return n(e)},className:"btn btn-sm btn-danger",children:"Delete"})})]},e._id)}))})]})},O=n(15),f=n.n(O),p=function(e){var t=e.itemsCount,n=e.pageSize,a=e.currentPage,r=e.onPageChange,c=Math.ceil(t/n);if(1===c)return null;var i=f.a.range(1,c+1);return Object(m.jsx)("nav",{children:Object(m.jsx)("ul",{className:"pagination",children:i.map((function(e){return Object(m.jsx)("li",{className:e===a?"page-item active":"page-item",children:Object(m.jsx)("button",{className:"page-link",onClick:function(){return r(e)},children:e})},e)}))})})},g=function(e){var t=e.items,n=e.textProperty,a=e.valueProperty,r=e.selectedItem,c=e.onItemSelect;return Object(m.jsx)("div",{className:"genre-container",children:Object(m.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(m.jsx)("li",{onClick:function(){return c(e)},className:e===r?"list-group-item active":"list-group-item",children:e[n]},e[a])}))})})};g.defaultProps={textProperty:"name",valueProperty:"_id"};var x=g,y=[{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"}];function k(){return y.filter((function(e){return e}))}var S=[{_id:"5b21ca3eeb7f6fbccd471815",title:"Terminator",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:6,dailyRentalRate:2.5,publishDate:"2018-01-03T19:04:28.809Z",liked:!0},{_id:"5b21ca3eeb7f6fbccd471816",title:"Die Hard",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:5,dailyRentalRate:2.5},{_id:"5b21ca3eeb7f6fbccd471817",title:"Get Out",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:8,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471819",title:"Trip to Italy",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181a",title:"Airplane",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181b",title:"Wedding Crashers",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181e",title:"Gone Girl",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:7,dailyRentalRate:4.5},{_id:"5b21ca3eeb7f6fbccd47181f",title:"The Sixth Sense",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:4,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471821",title:"The Avengers",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:7,dailyRentalRate:3.5}];var N=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],genres:[],pageSize:4,currentPage:1,sortColumn:{path:"title",order:"asc"}},e.handleDelete=function(t){var n=e.state.movies.filter((function(e){return e._id!==t._id}));e.setState({movies:n})},e.handleLike=function(t){var n=Object(j.a)(e.state.movies),a=n.indexOf(t);n[a]=Object(u.a)({},n[a]),n[a].liked=!n[a].liked,e.setState({movies:n})},e.handlePageChange=function(t){e.setState({currentPage:t})},e.handleGenreSelect=function(t){e.setState({selectedGenre:t,currentPage:1})},e.handleSort=function(t){var n=Object(u.a)({},e.state.sortColumn);n.path===t?n.order="asc"===n.order?"desc":"asc":(n.path=t,n.order="asc"),e.setState({sortColumn:n})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=[{_id:"",name:"All Genres"}].concat(Object(j.a)(k()));this.setState({movies:S,genres:e})}},{key:"render",value:function(){var e=this.state.movies.length;console.log(this.state.movies);var t=this.state,n=t.pageSize,a=t.currentPage,r=t.selectedGenre,c=t.movies,i=t.sortColumn;if(0===e)return Object(m.jsx)("p",{children:"There are no movies in the database."});var s=r&&r._id?c.filter((function(e){return e.genre._id===r._id})):c,l=function(e,t,n){var a=(t-1)*n;return f()(e).slice(a).take(n).value()}(f.a.orderBy(s,[i.path],[i.order]),a,n);return Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-2",children:Object(m.jsx)(x,{items:this.state.genres,selectedItem:r,onItemSelect:this.handleGenreSelect})}),Object(m.jsxs)("div",{className:"col",children:[Object(m.jsx)(d.c,{to:"/movies/new",children:Object(m.jsx)("button",{className:"btn btn-primary mb-3",children:"New Movie"})}),Object(m.jsxs)("div",{className:"movie-container",children:[Object(m.jsxs)("p",{children:["Showing ",s.length," movies in the database. ",Object(m.jsx)("i",{className:"bi bi-heart",children:" "})]}),Object(m.jsx)(v,{movies:l,onDelete:this.handleDelete,onLike:this.handleLike,onSort:this.handleSort}),Object(m.jsx)(p,{itemsCount:s.length,pageSize:n,currentPage:a,onPageChange:this.handlePageChange})]})]})]})}}]),n}(a.Component),R=function(){return Object(m.jsxs)("nav",{className:"navbar navbar-expand-md navbar-light bg-light mb-5",children:[Object(m.jsx)(d.b,{className:"navbar-brand",to:"/",children:Object(m.jsx)("b",{children:"Cinetv"})}),Object(m.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(m.jsxs)("ul",{className:"navbar-nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.c,{className:"nav-link",to:"/movies",children:Object(m.jsx)("b",{children:"Movies"})})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.c,{className:"nav-link",to:"/customers",children:Object(m.jsx)("b",{children:"Customers"})})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.c,{className:"nav-link",to:"/rentals",children:Object(m.jsx)("b",{children:"Rentals"})})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.c,{className:"nav-link",to:"/login",children:Object(m.jsx)("b",{children:"Login"})})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.c,{className:"nav-link",to:"/register",children:Object(m.jsx)("b",{children:"Register"})})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(d.c,{className:"nav-link disabled",to:"disabled",children:Object(m.jsx)("b",{children:"Disabled"})})})]})})]})},C=function(){return Object(m.jsx)("h1",{children:"Not Found"})},_=function(){return Object(m.jsx)("h1",{children:"Customers"})},I=function(){return Object(m.jsx)("h1",{children:"Rentals"})},w=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleSave=function(){e.props.history.replace("/movies")},e}return Object(s.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"movie-form-container",children:[Object(m.jsxs)("h1",{children:["Movie id : ",this.props.match.params.id]}),Object(m.jsx)("button",{className:"btn btn-primary btn-sm",onClick:this.handleSave,children:"Save"})]})}}]),n}(a.Component),P=n(17),T=n(30),A=n(9),D=n.n(A),G=n(21),L=["name","label","error"],q=function(e){var t=e.name,n=e.label,a=e.error,r=Object(G.a)(e,L);return Object(m.jsxs)("div",{className:"form-group mb-3",children:[Object(m.jsx)("label",{htmlFor:t,className:"form-label",children:n}),Object(m.jsx)("input",Object(u.a)(Object(u.a)({},r),{},{id:t,name:t,className:"form-control"})),a&&Object(m.jsx)("div",{className:"alert alert-danger",children:a})]})},F=["name","label","items","error"],M=function(e){var t=e.name,n=e.label,a=e.items,r=e.error,c=Object(G.a)(e,F);return Object(m.jsxs)("div",{className:"form-group mb-3",children:[Object(m.jsx)("label",{htmlFor:t,className:"form-label",children:n}),Object(m.jsx)("select",Object(u.a)(Object(u.a)({},c),{},{id:t,name:t,className:"form-control",children:a.map((function(e){return Object(m.jsx)("option",{value:e._id,children:e.name},e._id)}))})),r&&Object(m.jsx)("div",{className:"alert alert-danger",children:r})]})},B=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{},errors:{}},e.validate=function(){var t=D.a.validate(e.state.data,e.schema,{abortEarly:!1});if(!t.error)return null;var n,a={},r=Object(T.a)(t.error.details);try{for(r.s();!(n=r.n()).done;){var c=n.value;a[c.path[0]]=c.message}}catch(i){r.e(i)}finally{r.f()}return a},e.validateProperty=function(t){var n=t.name,a=t.value,r=Object(P.a)({},n,a),c=Object(P.a)({},n,e.schema[n]),i=D.a.validate(r,c,{abortEarly:!0}).error;return i?i.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var n=e.validate();e.setState({errors:n||{}}),console.log("errors:",n),n||e.doSubmit()},e.handleChange=function(t){var n=t.currentTarget,a=Object(u.a)({},e.state.errors),r=e.validateProperty(n);r?a[n.name]=r:delete a[n.name];var c=Object(u.a)({},e.state.data);c[n.name]=n.value,e.setState({data:c,errors:a})},e}return Object(s.a)(n,[{key:"renderButton",value:function(e){return Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:e})}},{key:"renderInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=this.state,r=a.data,c=a.errors;return Object(m.jsx)(q,{type:n,name:e,value:r[e],label:t,onChange:this.handleChange,error:c[e]})}},{key:"renderSelect",value:function(e,t,n){var a=this.state.errors;return Object(m.jsx)(M,{name:e,label:t,items:n,error:a[e],onChange:this.handleChange})}}]),n}(a.Component),z=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{username:"",password:""},errors:{}},e.schema={username:D.a.string().required().label("Username"),password:D.a.string().required().label("Password")},e}return Object(s.a)(n,[{key:"doSubmit",value:function(){console.log("Login Submitted")}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"login-form-container",children:[Object(m.jsx)("h1",{children:"Login"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("username","UserName"),this.renderInput("password","Password","password"),this.renderButton("Login")]})]})}}]),n}(B),U=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{username:"",password:"",name:""},errors:{}},e.schema={username:D.a.string().required().label("Username"),password:D.a.string().required().label("Password"),name:D.a.string().required().label("Name")},e}return Object(s.a)(n,[{key:"doSubmit",value:function(){console.log("Registered")}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"login-form-container",children:[Object(m.jsx)("h1",{children:"Register"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("username","UserName"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Register")]})]})}}]),n}(B),E=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{title:"",genreId:"",numberInStock:"",dailyRentalRate:""},errors:{},genres:[]},e.schema={title:D.a.string().required().label("Title"),genreId:D.a.string().required().label("Genre"),numberInStock:D.a.number().integer().min(0).required().label("Number in Stock"),dailyRentalRate:D.a.number().min(0).max(10).required().label("Rate")},e}return Object(s.a)(n,[{key:"doSubmit",value:function(){var e=this.state.data;console.log("data:",e);var t={_id:"",title:e.title,genre:{_id:e.genreId,name:""},numberInStock:Number(e.numberInStock),dailyRentalRate:Number(e.dailyRentalRate)};console.log("movie:",t);var n=function(e){var t=S.find((function(t){return t._id===e._id}))||{};return t.title=e.title,t.genre=y.find((function(t){return t._id===e.genre._id})),t.numberInStock=e.numberInStock,t.dailyRentalRate=e.dailyRentalRate,t._id||(t._id=String(Date.now()),S.push(t)),t}(t);console.log("Movie submitted:",n),this.props.history.push("/movies")}},{key:"componentDidMount",value:function(){var e=[{_id:"",name:""}].concat(Object(j.a)(k()));this.setState({genres:e})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"addmovie-form-container",children:[Object(m.jsx)("h1",{children:"Movie Form"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("title","Title"),this.renderSelect("genreId","Genre",this.state.genres),this.renderInput("numberInStock","Number in Stock"),this.renderInput("dailyRentalRate","Rate"),this.renderButton("Save")]})]})}}]),n}(B),J=Object(b.g)(E),H=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(m.jsx)(d.a,{children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(R,{}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{path:"/login",component:z}),Object(m.jsx)(b.b,{path:"/register",component:U}),Object(m.jsx)(b.b,{path:"/movies/new",component:J}),Object(m.jsx)(b.b,{path:"/movies/:id",component:w}),Object(m.jsx)(b.b,{path:"/rentals",component:I}),Object(m.jsx)(b.b,{path:"/customers",component:_}),Object(m.jsx)(b.b,{path:"/movies",component:N}),Object(m.jsx)(b.b,{path:"/not-found",component:C}),Object(m.jsx)(b.a,{exact:!0,from:"/",to:"/movies"}),Object(m.jsx)(b.a,{to:"not-found"})]})})]})})}}]),n}(a.Component),W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};n(42),n(43),n(44);c.a.render(Object(m.jsx)(H,{}),document.getElementById("root")),W()}},[[45,1,2]]]);
//# sourceMappingURL=main.a96473ab.chunk.js.map